"use strict";(self.webpackChunkdata_structure_visualizer=self.webpackChunkdata_structure_visualizer||[]).push([[5482],{5482:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ge});var r,i,o,l,s,a,h,c,d,u,p,m,x,f,g,y,j,A,v,w,b,C,I,D,k,E,M,H,z,R,B=t(89379),P=t(57528),S=t(9950),L=t(44752),F=t(29723),O=t(90234),T=t(74930),N=t(84412),G=t(85283),V=t(44414);const _=L.Ay.div(r||(r=(0,P.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n"]))),q=L.Ay.div(i||(i=(0,P.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),U=L.Ay.h1(o||(o=(0,P.A)(["\n  font-size: 2rem;\n  font-weight: 700;\n  color: ",";\n"])),e=>{let{theme:n}=e;return n.colors.gray800}),W=L.Ay.p(l||(l=(0,P.A)(["\n  color: ",";\n  max-width: 800px;\n  line-height: 1.6;\n"])),e=>{let{theme:n}=e;return n.colors.textLight}),Q=L.Ay.div(s||(s=(0,P.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n  \n  @media (min-width: ",") {\n    flex-direction: row;\n  }\n"])),e=>{let{theme:n}=e;return n.breakpoints.lg}),X=L.Ay.div(a||(a=(0,P.A)(["\n  flex: 2;\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n"]))),Y=L.Ay.div(h||(h=(0,P.A)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"]))),Z=L.Ay.div(c||(c=(0,P.A)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1rem;\n  padding: 1rem;\n  background-color: ",";\n  border-radius: ",";\n  box-shadow: ",";\n"])),e=>{let{theme:n}=e;return n.colors.card},e=>{let{theme:n}=e;return n.borderRadius},e=>{let{theme:n}=e;return n.shadows.sm}),J=L.Ay.div(d||(d=(0,P.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),K=L.Ay.input(u||(u=(0,P.A)(["\n  padding: 0.5rem;\n  border: 1px solid ",";\n  border-radius: ",";\n  width: 80px;\n  font-family: ",";\n"])),e=>{let{theme:n}=e;return n.colors.gray300},e=>{let{theme:n}=e;return n.borderRadius},e=>{let{theme:n}=e;return n.fonts.mono}),$=L.Ay.button(p||(p=(0,P.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background-color: ",";\n  color: ",";\n  border-radius: ",";\n  font-weight: 500;\n  transition: ",";\n  \n  &:hover {\n    opacity: 0.9;\n    transform: translateY(-1px);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),e=>{let{theme:n,variant:t}=e;return"primary"===t?n.colors.primary:"secondary"===t?n.colors.secondary:"danger"===t?n.colors.danger:n.colors.gray200},e=>{let{variant:n}=e;return n?"white":"inherit"},e=>{let{theme:n}=e;return n.borderRadius},e=>{let{theme:n}=e;return n.transitions.default}),ee=L.Ay.div(m||(m=(0,P.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  padding: 2rem;\n  background-color: ",";\n  border-radius: ",";\n  box-shadow: ",";\n  min-height: 500px;\n"])),e=>{let{theme:n}=e;return n.colors.card},e=>{let{theme:n}=e;return n.borderRadius},e=>{let{theme:n}=e;return n.shadows.md}),ne=L.Ay.div(x||(x=(0,P.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  margin-top: 2rem;\n  position: relative;\n"]))),te=(L.Ay.div(f||(f=(0,P.A)(["\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  margin-bottom: 2rem;\n"]))),L.Ay.div(g||(g=(0,P.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 0 1rem;\n  position: relative;\n"])))),re=(0,L.Ay)(F.P.div)(y||(y=(0,P.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 50px;\n  height: 50px;\n  background-color: ",";\n  color: ",";\n  border-radius: 50%;\n  font-family: ",";\n  font-weight: 600;\n  font-size: 1.25rem;\n  border: 2px solid ",";\n  position: relative;\n  z-index: 2;\n"])),e=>{let{theme:n,isHighlighted:t}=e;return t?n.colors.primary:"white"},e=>{let{theme:n,isHighlighted:t}=e;return t?"white":n.colors.gray800},e=>{let{theme:n}=e;return n.fonts.mono},e=>{let{theme:n,isHighlighted:t}=e;return t?n.colors.primary:n.colors.gray300}),ie=L.Ay.svg(j||(j=(0,P.A)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 1;\n"]))),oe=L.Ay.line(A||(A=(0,P.A)(["\n  stroke: ",";\n  stroke-width: 2;\n"])),e=>{let{theme:n}=e;return n.colors.gray300}),le=L.Ay.div(v||(v=(0,P.A)(["\n  background-color: #1E1E1E;\n  border-radius: ",";\n  overflow: hidden;\n"])),e=>{let{theme:n}=e;return n.borderRadius}),se=L.Ay.div(w||(w=(0,P.A)(["\n  padding: 0.75rem 1rem;\n  background-color: ",";\n  color: ",";\n  font-family: ",";\n  font-size: 0.875rem;\n"])),e=>{let{theme:n}=e;return n.colors.text},e=>{let{theme:n}=e;return n.colors.card},e=>{let{theme:n}=e;return n.fonts.mono}),ae=L.Ay.div(b||(b=(0,P.A)(["\n  padding: 1rem;\n  background-color: ",";\n  border-radius: ",";\n  box-shadow: ",";\n"])),e=>{let{theme:n}=e;return n.colors.card},e=>{let{theme:n}=e;return n.borderRadius},e=>{let{theme:n}=e;return n.shadows.sm}),he=L.Ay.h3(C||(C=(0,P.A)(["\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  color: ",";\n"])),e=>{let{theme:n}=e;return n.colors.gray800}),ce=L.Ay.div(I||(I=(0,P.A)(["\n  color: ",";\n  line-height: 1.6;\n  \n  ul {\n    padding-left: 1.5rem;\n    margin-top: 0.5rem;\n  }\n  \n  li {\n    margin-bottom: 0.25rem;\n  }\n"])),e=>{let{theme:n}=e;return n.colors.textLight}),de=L.Ay.div(D||(D=(0,P.A)(["\n  padding: 0.75rem 1rem;\n  background-color: ",";\n  border-radius: ",";\n  color: ",";\n  font-size: 0.875rem;\n  margin-top: 1rem;\n"])),e=>{let{theme:n}=e;return n.colors.gray100},e=>{let{theme:n}=e;return n.borderRadius},e=>{let{theme:n}=e;return n.colors.gray700}),ue=(L.Ay.div(k||(k=(0,P.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  min-height: 400px;\n  position: relative;\n"]))),L.Ay.div(E||(E=(0,P.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 1rem;\n  font-weight: 500;\n"])))),pe=L.Ay.span(M||(M=(0,P.A)(["\n  color: ",";\n"])),e=>{let{theme:n,isActive:t}=e;return t?n.colors.primary:n.colors.gray500}),me=L.Ay.div(H||(H=(0,P.A)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n  margin-top: 1rem;\n  padding: 1rem;\n  background-color: ",";\n  border-radius: ",";\n"])),e=>{let{theme:n}=e;return n.colors.gray100},e=>{let{theme:n}=e;return n.borderRadius}),xe=L.Ay.div(z||(z=(0,P.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  background-color: ",";\n  color: ",";\n  border-radius: ",";\n  font-family: ",";\n  font-weight: 600;\n  border: 1px solid ",";\n  position: relative;\n"])),e=>{let{theme:n,isHighlighted:t}=e;return t?n.colors.primary:"white"},e=>{let{theme:n,isHighlighted:t}=e;return t?"white":n.colors.gray800},e=>{let{theme:n}=e;return n.borderRadius},e=>{let{theme:n}=e;return n.fonts.mono},e=>{let{theme:n,isHighlighted:t}=e;return t?n.colors.primary:n.colors.gray300}),fe=L.Ay.div(R||(R=(0,P.A)(["\n  position: absolute;\n  top: -20px;\n  font-size: 0.75rem;\n  color: ",";\n  font-weight: normal;\n"])),e=>{let{theme:n}=e;return n.colors.gray500}),ge=()=>{const[e,n]=(0,S.useState)([]),[t,r]=(0,S.useState)(""),[i,o]=(0,S.useState)(""),[l,s]=(0,S.useState)(!0),[a,h]=(0,S.useState)(null),[c,d]=(0,S.useState)([]);(0,S.useEffect)(()=>{u()},[]),(0,S.useEffect)(()=>{m()},[e]);const u=()=>{const e=l?[3,5,7,8,10,15,20]:[20,15,10,8,7,5,3],t=[];e.forEach(e=>{p(e,t,!1)}),n(t),h(null),o("".concat(l?"Min":"Max"," heap initialized with values ").concat(e.join(", ")))},p=function(t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=[...arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,{value:t,isHighlighted:!0}];let a=s.length-1;for(;a>0;){const e=Math.floor((a-1)/2);if(!(l&&s[e].value>s[a].value||!l&&s[e].value<s[a].value))break;[s[e],s[a]]=[s[a],s[e]],a=e}if(!i)return s;n(s),h(a),o("Inserted ".concat(t," into the ").concat(l?"min":"max"," heap")),r(""),setTimeout(()=>{n(e=>e.map(e=>(0,B.A)((0,B.A)({},e),{},{isHighlighted:!1}))),h(null)},1500)},m=()=>{if(e.length<=1)return void d([]);const n=[],t=[];for(let r=0;r<e.length;r++){const e=Math.floor(Math.log2(r+1)),n=600/Math.pow(2,e),i=(r-(Math.pow(2,e)-1)+.5)*n,o=80*e+25;t.push({x:i,y:o})}for(let r=0;r<e.length;r++){const e=Math.floor((r-1)/2);r>0&&n.push({x1:t[e].x,y1:t[e].y+25,x2:t[r].x,y2:t[r].y-25})}d(n)};return(0,V.jsxs)(_,{children:[(0,V.jsxs)(q,{children:[(0,V.jsx)(U,{children:"Heap Visualization"}),(0,V.jsx)(W,{children:"A heap is a specialized tree-based data structure that satisfies the heap property. This visualization demonstrates operations like insertion and extraction in both min and max heaps."})]}),(0,V.jsxs)(Q,{children:[(0,V.jsxs)(X,{children:[(0,V.jsxs)(Z,{children:[(0,V.jsxs)(ue,{children:[(0,V.jsx)(pe,{isActive:l,children:"Min Heap"}),(0,V.jsx)($,{onClick:()=>{s(!l),setTimeout(()=>{u()},100)},children:l?(0,V.jsx)(T.Hzw,{size:20}):(0,V.jsx)(T.Q04,{size:20})}),(0,V.jsx)(pe,{isActive:!l,children:"Max Heap"})]}),(0,V.jsx)(J,{children:(0,V.jsx)(K,{type:"number",placeholder:"Value",value:t,onChange:e=>{r(e.target.value)}})}),(0,V.jsxs)($,{variant:"primary",onClick:()=>{const e=parseInt(t);isNaN(e)?o("Please enter a valid number"):p(e)},children:[(0,V.jsx)(T.GGD,{size:16})," Insert"]}),(0,V.jsxs)($,{variant:"secondary",onClick:()=>{if(0===e.length)return void o("Heap is empty");const t=e.map((e,n)=>(0,B.A)((0,B.A)({},e),{},{isHighlighted:0===n}));n(t),h(0);const r=e[0].value;setTimeout(()=>{if(1===e.length)return n([]),o("Extracted ".concat(r," from the ").concat(l?"min":"max"," heap")),void h(null);const t=[...e];t[0]=(0,B.A)((0,B.A)({},t[t.length-1]),{},{isHighlighted:!0}),t.pop();let i=0;const s=t.length;for(;;){const e=2*i+1,n=2*i+2;let r=i;if(e<s&&(l&&t[e].value<t[r].value||!l&&t[e].value>t[r].value)&&(r=e),n<s&&(l&&t[n].value<t[r].value||!l&&t[n].value>t[r].value)&&(r=n),r===i)break;[t[i],t[r]]=[t[r],t[i]],i=r}n(t),h(i),o("Extracted ".concat(r," from the ").concat(l?"min":"max"," heap")),setTimeout(()=>{n(e=>e.map(e=>(0,B.A)((0,B.A)({},e),{},{isHighlighted:!1}))),h(null)},1500)},800)},children:[(0,V.jsx)(T.ei4,{size:16})," Extract ",l?"Min":"Max"]}),(0,V.jsxs)($,{onClick:u,children:[(0,V.jsx)(T.jTZ,{size:16})," Reset"]})]}),(0,V.jsxs)(ee,{children:[(0,V.jsxs)(ne,{children:[(0,V.jsx)(ie,{children:c.map((e,n)=>(0,V.jsx)(oe,{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},n))}),(0,V.jsx)(O.N,{children:e.map((e,n)=>{const t=Math.floor(Math.log2(n+1)),r=600/Math.pow(2,t),i=(n-(Math.pow(2,t)-1)+.5)*r,o=80*t+25;return(0,V.jsx)(te,{style:{position:"absolute",left:i,top:o},children:(0,V.jsx)(re,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.3},isHighlighted:e.isHighlighted||n===a,children:e.value})},"".concat(e.value,"-").concat(n))})})]}),(0,V.jsx)(me,{children:e.map((e,n)=>(0,V.jsxs)(xe,{isHighlighted:e.isHighlighted||n===a,children:[(0,V.jsx)(fe,{children:n}),e.value]},"array-".concat(e.value,"-").concat(n)))}),i&&(0,V.jsx)(de,{children:i})]}),(0,V.jsxs)(ae,{children:[(0,V.jsx)(he,{children:"About Heaps"}),(0,V.jsxs)(ce,{children:[(0,V.jsx)("p",{children:"A heap is a specialized tree-based data structure that satisfies the heap property. In a min heap, for any given node, the value of the node is less than or equal to the values of its children. In a max heap, the value of the node is greater than or equal to the values of its children."}),(0,V.jsxs)("ul",{children:[(0,V.jsxs)("li",{children:[(0,V.jsx)("strong",{children:"Insert:"})," Add a new element to the heap while maintaining the heap property"]}),(0,V.jsxs)("li",{children:[(0,V.jsx)("strong",{children:"Extract Min/Max:"})," Remove and return the minimum (for min heap) or maximum (for max heap) element"]}),(0,V.jsxs)("li",{children:[(0,V.jsx)("strong",{children:"Peek:"})," View the minimum (for min heap) or maximum (for max heap) element without removing it"]}),(0,V.jsxs)("li",{children:[(0,V.jsx)("strong",{children:"Time Complexity:"}),(0,V.jsxs)("ul",{children:[(0,V.jsx)("li",{children:"Insert: O(log n)"}),(0,V.jsx)("li",{children:"Extract Min/Max: O(log n)"}),(0,V.jsx)("li",{children:"Peek: O(1)"})]})]}),(0,V.jsxs)("li",{children:[(0,V.jsx)("strong",{children:"Applications:"}),(0,V.jsxs)("ul",{children:[(0,V.jsx)("li",{children:"Priority queues"}),(0,V.jsx)("li",{children:"Heap sort"}),(0,V.jsx)("li",{children:"Graph algorithms (Dijkstra's, Prim's)"}),(0,V.jsx)("li",{children:"Median finding algorithms"})]})]})]})]})]})]}),(0,V.jsxs)(Y,{children:[(0,V.jsxs)(le,{children:[(0,V.jsx)(se,{children:"Insert Operation"}),(0,V.jsx)(N.A,{language:"javascript",style:G.A,showLineNumbers:!0,children:"\nfunction insert(value) {\n  // Add the new value to the end of the heap\n  this.heap.push(value);\n  \n  // Get the index of the newly added element\n  let currentIndex = this.heap.length - 1;\n  \n  // Heapify up\n  while (currentIndex > 0) {\n    const parentIndex = Math.floor((currentIndex - 1) / 2);\n    \n    // For min heap, if parent is greater than child, swap\n    // For max heap, if parent is less than child, swap\n    if ((this.isMinHeap && this.heap[parentIndex] > this.heap[currentIndex]) ||\n        (!this.isMinHeap && this.heap[parentIndex] < this.heap[currentIndex])) {\n      // Swap\n      [this.heap[parentIndex], this.heap[currentIndex]] = \n        [this.heap[currentIndex], this.heap[parentIndex]];\n      currentIndex = parentIndex;\n    } else {\n      break;\n    }\n  }\n}"})]}),(0,V.jsxs)(le,{children:[(0,V.jsx)(se,{children:"Extract Min/Max Operation"}),(0,V.jsx)(N.A,{language:"javascript",style:G.A,showLineNumbers:!0,children:"\nfunction extractRoot() {\n  if (this.heap.length === 0) {\n    return null;\n  }\n  \n  const root = this.heap[0];\n  \n  // If there's only one element, just remove it\n  if (this.heap.length === 1) {\n    this.heap.pop();\n    return root;\n  }\n  \n  // Replace the root with the last element\n  this.heap[0] = this.heap.pop();\n  \n  // Heapify down\n  let currentIndex = 0;\n  const heapSize = this.heap.length;\n  \n  while (true) {\n    const leftChildIndex = 2 * currentIndex + 1;\n    const rightChildIndex = 2 * currentIndex + 2;\n    let swapIndex = currentIndex;\n    \n    // For min heap, find the smallest value\n    // For max heap, find the largest value\n    if (leftChildIndex < heapSize) {\n      if ((this.isMinHeap && this.heap[leftChildIndex] < this.heap[swapIndex]) ||\n          (!this.isMinHeap && this.heap[leftChildIndex] > this.heap[swapIndex])) {\n        swapIndex = leftChildIndex;\n      }\n    }\n    \n    if (rightChildIndex < heapSize) {\n      if ((this.isMinHeap && this.heap[rightChildIndex] < this.heap[swapIndex]) ||\n          (!this.isMinHeap && this.heap[rightChildIndex] > this.heap[swapIndex])) {\n        swapIndex = rightChildIndex;\n      }\n    }\n    \n    // If no swap is needed, break\n    if (swapIndex === currentIndex) {\n      break;\n    }\n    \n    // Swap\n    [this.heap[currentIndex], this.heap[swapIndex]] = \n      [this.heap[swapIndex], this.heap[currentIndex]];\n    currentIndex = swapIndex;\n  }\n  \n  return root;\n}"})]}),(0,V.jsxs)(le,{children:[(0,V.jsx)(se,{children:"Peek Operation"}),(0,V.jsx)(N.A,{language:"javascript",style:G.A,showLineNumbers:!0,children:"\nfunction peek() {\n  if (this.heap.length === 0) {\n    return null;\n  }\n  \n  return this.heap[0];\n}"})]})]})]})]})}},85283:(e,n,t)=>{t.d(n,{A:()=>r});const r={hljs:{display:"block",overflowX:"auto",padding:"0.5em",background:"#1E1E1E",color:"#DCDCDC"},"hljs-keyword":{color:"#569CD6"},"hljs-literal":{color:"#569CD6"},"hljs-symbol":{color:"#569CD6"},"hljs-name":{color:"#569CD6"},"hljs-link":{color:"#569CD6",textDecoration:"underline"},"hljs-built_in":{color:"#4EC9B0"},"hljs-type":{color:"#4EC9B0"},"hljs-number":{color:"#B8D7A3"},"hljs-class":{color:"#B8D7A3"},"hljs-string":{color:"#D69D85"},"hljs-meta-string":{color:"#D69D85"},"hljs-regexp":{color:"#9A5334"},"hljs-template-tag":{color:"#9A5334"},"hljs-subst":{color:"#DCDCDC"},"hljs-function":{color:"#DCDCDC"},"hljs-title":{color:"#DCDCDC"},"hljs-params":{color:"#DCDCDC"},"hljs-formula":{color:"#DCDCDC"},"hljs-comment":{color:"#57A64A",fontStyle:"italic"},"hljs-quote":{color:"#57A64A",fontStyle:"italic"},"hljs-doctag":{color:"#608B4E"},"hljs-meta":{color:"#9B9B9B"},"hljs-meta-keyword":{color:"#9B9B9B"},"hljs-tag":{color:"#9B9B9B"},"hljs-variable":{color:"#BD63C5"},"hljs-template-variable":{color:"#BD63C5"},"hljs-attr":{color:"#9CDCFE"},"hljs-attribute":{color:"#9CDCFE"},"hljs-builtin-name":{color:"#9CDCFE"},"hljs-section":{color:"gold"},"hljs-emphasis":{fontStyle:"italic"},"hljs-strong":{fontWeight:"bold"},"hljs-bullet":{color:"#D7BA7D"},"hljs-selector-tag":{color:"#D7BA7D"},"hljs-selector-id":{color:"#D7BA7D"},"hljs-selector-class":{color:"#D7BA7D"},"hljs-selector-attr":{color:"#D7BA7D"},"hljs-selector-pseudo":{color:"#D7BA7D"},"hljs-addition":{backgroundColor:"#144212",display:"inline-block",width:"100%"},"hljs-deletion":{backgroundColor:"#600",display:"inline-block",width:"100%"}}},90234:(e,n,t)=>{t.d(n,{N:()=>f});var r=t(9950),i=t(47544);function o(){const e=(0,r.useRef)(!1);return(0,i.E)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var l=t(47078);var s=t(13487),a=t(79305);class h extends r.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=n.offsetHeight||0,e.width=n.offsetWidth||0,e.top=n.offsetTop,e.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function c(e){let{children:n,isPresent:t}=e;const i=(0,r.useId)(),o=(0,r.useRef)(null),l=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)(()=>{const{width:e,height:n,top:r,left:s}=l.current;if(t||!o.current||!e||!n)return;o.current.dataset.motionPopId=i;const a=document.createElement("style");return document.head.appendChild(a),a.sheet&&a.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(n,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(s,"px !important;\n          }\n        ")),()=>{document.head.removeChild(a)}},[t]),r.createElement(h,{isPresent:t,childRef:o,sizeRef:l},r.cloneElement(n,{ref:o}))}const d=e=>{let{children:n,initial:t,isPresent:i,onExitComplete:o,custom:l,presenceAffectsLayout:h,mode:d}=e;const p=(0,a.M)(u),m=(0,r.useId)(),x=(0,r.useMemo)(()=>({id:m,initial:t,isPresent:i,custom:l,onExitComplete:e=>{p.set(e,!0);for(const n of p.values())if(!n)return;o&&o()},register:e=>(p.set(e,!1),()=>p.delete(e))}),h?void 0:[i]);return(0,r.useMemo)(()=>{p.forEach((e,n)=>p.set(n,!1))},[i]),r.useEffect(()=>{!i&&!p.size&&o&&o()},[i]),"popLayout"===d&&(n=r.createElement(c,{isPresent:i},n)),r.createElement(s.t.Provider,{value:x},n)};function u(){return new Map}var p=t(76017);var m=t(19366);const x=e=>e.key||"";const f=e=>{let{children:n,custom:t,initial:s=!0,onExitComplete:a,exitBeforeEnter:h,presenceAffectsLayout:c=!0,mode:u="sync"}=e;(0,m.V)(!h,"Replace exitBeforeEnter with mode='wait'");const f=(0,r.useContext)(p.L).forceRender||function(){const e=o(),[n,t]=(0,r.useState)(0),i=(0,r.useCallback)(()=>{e.current&&t(n+1)},[n]);return[(0,r.useCallback)(()=>l.Gt.postRender(i),[i]),n]}()[0],g=o(),y=function(e){const n=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&n.push(e)}),n}(n);let j=y;const A=(0,r.useRef)(new Map).current,v=(0,r.useRef)(j),w=(0,r.useRef)(new Map).current,b=(0,r.useRef)(!0);var C;if((0,i.E)(()=>{b.current=!1,function(e,n){e.forEach(e=>{const t=x(e);n.set(t,e)})}(y,w),v.current=j}),C=()=>{b.current=!0,w.clear(),A.clear()},(0,r.useEffect)(()=>()=>C(),[]),b.current)return r.createElement(r.Fragment,null,j.map(e=>r.createElement(d,{key:x(e),isPresent:!0,initial:!!s&&void 0,presenceAffectsLayout:c,mode:u},e)));j=[...j];const I=v.current.map(x),D=y.map(x),k=I.length;for(let r=0;r<k;r++){const e=I[r];-1!==D.indexOf(e)||A.has(e)||A.set(e,void 0)}return"wait"===u&&A.size&&(j=[]),A.forEach((e,n)=>{if(-1!==D.indexOf(n))return;const i=w.get(n);if(!i)return;const o=I.indexOf(n);let l=e;if(!l){const e=()=>{A.delete(n);const e=Array.from(w.keys()).filter(e=>!D.includes(e));if(e.forEach(e=>w.delete(e)),v.current=y.filter(t=>{const r=x(t);return r===n||e.includes(r)}),!A.size){if(!1===g.current)return;f(),a&&a()}};l=r.createElement(d,{key:x(i),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:c,mode:u},i),A.set(n,l)}j.splice(o,0,l)}),j=j.map(e=>{const n=e.key;return A.has(n)?e:r.createElement(d,{key:x(e),isPresent:!0,presenceAffectsLayout:c,mode:u},e)}),r.createElement(r.Fragment,null,A.size?j:j.map(e=>(0,r.cloneElement)(e)))}}}]);